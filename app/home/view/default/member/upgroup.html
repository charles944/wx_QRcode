<style>
    .modal-dialog {
        width: 430px;
    }
</style>

<div>
    <form id="set_code" action="__SELF__" method="post" class="ajax-form">
        <input type="hidden" name="group_id" value="{$group_id}">
        <div class="form-group clearfix">
            <label class="col-xs-4 control-label" style="text-align: right;">
                邀请码：
            </label>

            <div class="col-xs-8">
                <input type="text" name="code" class="form-control" value="">
                <div class="clearfix"></div>
            </div>
        </div>
        <div style="width: 100%;text-align: center;">
            <a class="btn btn-primary" data-role="submit">提交</a>
            <a onclick="$('.close').click();" class="btn btn-default">取消</a>
        </div>
    </form>
</div>
<script>
    $(function () {
        $('[data-role="submit"]').click(function () {
            query = $('#set_code').serialize();
            var url = $('#set_code').attr('action');
            $.post(url, query, function (msg) {
                if (msg.status) {
					layer.msg('角色升级成功！', {icon: 1, fixed: true, offset: '80%', time: 1000});
                    setTimeout(function () {
                        window.location.href=msg.url;
                    }, 1500);
                } else {
                    layui.qn.handleAjax(msg);
                }
            }, 'json');
        });
    });
</script>